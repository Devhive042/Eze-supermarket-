<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin – Product Management</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
*{box-sizing:border-box;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;}
body{margin:0;min-height:100vh;background:#f5f7fb;color:#333;transition:.3s;}
body.dark{background:#111216;color:#eaeaea;}
header{background:#007bff;color:#fff;padding:14px;display:flex;align-items:center;justify-content:space-between;}
header h1{margin:0;font-size:18px;}
.balance{font-weight:600;}
.hamburger{font-size:22px;cursor:pointer;background:none;border:none;color:#fff;margin-right:12px;}
nav{position:fixed;top:0;left:-260px;width:240px;height:100%;background:#fff;box-shadow:2px 0 6px rgba(0,0,0,.2);padding:20px;transition:.3s;z-index:1000;}
nav.active{left:0;}
nav h2{margin:0 0 16px;color:#007bff;}
nav ul{list-style:none;padding:0;margin:0;}
nav li{margin-bottom:12px;}
nav a{text-decoration:none;color:inherit;display:block;padding:8px;border-radius:6px;}
nav a:hover{background:#007bff;color:#fff;}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:900;}
.overlay.active{display:block;}
main{flex:1;padding:20px;margin-top:10px;}
h2{color:#007bff;margin-top:0;}
.product-card{background:#fff;padding:12px;border-radius:10px;margin-bottom:12px;box-shadow:0 2px 6px rgba(0,0,0,.08);display:flex;align-items:center;gap:12px;position:relative;}
body.dark .product-card{background:#2b2b2b;color:#eee;}
.product-card img{width:80px;height:80px;object-fit:cover;border-radius:6px;}
.product-card .details{flex:1;}
.product-card .details h3{margin:0 0 6px;font-size:16px;}
.product-card .details p{margin:0 0 4px;font-size:14px;}
.product-card button{padding:4px 8px;border:none;border-radius:6px;cursor:pointer;}
.product-card .edit{background:#ffc107;color:#fff;}
.product-card .delete{background:red;color:#fff;}
.add-card{background:#fff;padding:12px;border-radius:10px;margin-bottom:16px;box-shadow:0 2px 6px rgba(0,0,0,.08);}
.add-card label{display:block;margin-top:6px;font-weight:600;}
.add-card input, .add-card textarea, .add-card select{width:100%;padding:8px;margin-top:4px;border:1px solid #ccc;border-radius:6px;}
.add-card button{margin-top:10px;padding:10px 14px;border:none;border-radius:6px;background:#007bff;color:#fff;cursor:pointer;}
.add-card button:hover{opacity:.9;}
</style>
</head>
<body>

<div class="overlay" id="overlay"></div>

<nav id="sidebar">
<h2>Menu</h2>
<ul>
<li><a href="admin-dashboard.html">Dashboard</a></li>
<li><a href="admin-users.html">Users</a></li>
<li><a href="admin-topups.html">Top-ups</a></li>
<li><a href="admin-purchases.html">Purchases</a></li>
<li><a href="admin-products.html" class="active">Products</a></li>
<li><a href="#" id="logout">Logout</a></li>
</ul>
</nav>

<header>
<div style="display:flex;align-items:center;">
<button class="hamburger" id="menuBtn">☰</button>
<h1>Product Management</h1>
</div>
</header>

<main>
<h2>Available Products</h2>
<div id="productList"></div>

<h2>Add / Edit Product</h2>
<div class="add-card">
<label>Product Name</label>
<input type="text" id="pName" placeholder="Product Name">
<label>Price (₦)</label>
<input type="number" id="pPrice" placeholder="1000">
<label>Description</label>
<textarea id="pDesc" rows="2" placeholder="Description"></textarea>
<label>Rating</label>
<select id="pRating">
<option value="1">1 ⭐</option>
<option value="2">2 ⭐⭐</option>
<option value="3">3 ⭐⭐⭐</option>
<option value="4">4 ⭐⭐⭐⭐</option>
<option value="5">5 ⭐⭐⭐⭐⭐</option>
</select>
<label>Image URL</label>
<input type="text" id="pImg" placeholder="https://example.com/image.jpg">
<button id="saveBtn">Save Product</button>
</div>
</main>

<script>
const $ = id => document.getElementById(id);
const menuBtn = $('menuBtn'), sidebar = $('sidebar'), overlay = $('overlay');
menuBtn.onclick = ()=>{sidebar.classList.add('active'); overlay.classList.add('active');};
overlay.onclick = ()=>{sidebar.classList.remove('active'); overlay.classList.remove('active');};
document.querySelectorAll('#sidebar a').forEach(a=>a.addEventListener('click',()=>{sidebar.classList.remove('active'); overlay.classList.remove('active');}));

let products = JSON.parse(localStorage.getItem('products')||'[]');
let editId = null;

function renderProducts(){
  const list = $('productList');
  list.innerHTML = '';
  products.forEach((p,i)=>{
    const div = document.createElement('div');
    div.className='product-card';
    div.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <div class="details">
        <h3>${p.name}</h3>
        <p>₦${p.price.toLocaleString()}</p>
        <p>${p.desc}</p>
        <p>Rating: ${'⭐'.repeat(p.rating)}</p>
      </div>
      <button class="edit">Edit</button>
      <button class="delete">Delete</button>
    `;
    div.querySelector('.edit').onclick = ()=>{
      editId = i;
      $('pName').value = p.name;
      $('pPrice').value = p.price;
      $('pDesc').value = p.desc;
      $('pRating').value = p.rating;
      $('pImg').value = p.img;
      window.scrollTo(0,document.body.scrollHeight);
    };
    div.querySelector('.delete').onclick = ()=>{
      if(confirm('Delete this product?')){
        products.splice(i,1);
        localStorage.setItem('products',JSON.stringify(products));
        renderProducts();
      }
    };
    list.appendChild(div);
  });
}

$('saveBtn').onclick = ()=>{
  const name = $('pName').value.trim();
  const price = Number($('pPrice').value);
  const desc = $('pDesc').value.trim();
  const rating = Number($('pRating').value);
  const img = $('pImg').value.trim();
  if(!name || !price || !desc || !rating || !img){ alert('Fill all fields'); return; }

  if(editId !== null){
    products[editId] = {name, price, desc, rating, img};
    editId = null;
  } else {
    products.push({name, price, desc, rating, img});
  }
  localStorage.setItem('products',JSON.stringify(products));
  $('pName').value=''; $('pPrice').value=''; $('pDesc').value=''; $('pRating').value='1'; $('pImg').value='';
  renderProducts();
}

renderProducts();

// Dark mode sync
const dark = localStorage.getItem('theme');
if(dark==='dark'){ document.body.classList.add('dark'); }
window.addEventListener('storage',e=>{
  if(e.key==='theme'){ document.body.classList.toggle('dark', localStorage.getItem('theme')==='dark'); }
});
</script>

</body>
</html>