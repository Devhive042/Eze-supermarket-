<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login – Eze Supermarket</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  *{box-sizing:border-box;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;}
  body{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px;background:linear-gradient(135deg,#007bff,#00c6ff);}
  .login-box{width:100%;max-width:400px;background:#fff;border-radius:16px;padding:30px 20px;box-shadow:0 10px 30px rgba(0,0,0,.15);}
  h1{margin:0 0 10px;color:#007bff;font-size:24px;text-align:center;}
  p.sub{margin:0 0 20px;text-align:center;color:#555;}
  label{display:block;margin-top:12px;font-weight:600;color:#333;}
  input{width:100%;padding:12px;border:1px solid #ccc;border-radius:10px;margin-top:6px;outline:none;transition:.2s;}
  input:focus{border-color:#007bff;box-shadow:0 0 0 4px rgba(0,123,255,.12);}
  .pass-wrap{position:relative;}
  .toggle{position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:12px;color:#007bff;cursor:pointer;user-select:none;}
  button{width:100%;padding:12px;border:none;border-radius:10px;background:#007bff;color:#fff;font-weight:700;margin-top:20px;cursor:pointer;transition:.2s;}
  button:hover{background:#005ecb;}
  .msg{text-align:center;margin-top:12px;font-weight:600;}
  .err{color:#d60000;}
  .ok{color:#188038;}
  .small{margin-top:12px;text-align:center;}
  .small a{color:#007bff;text-decoration:none;}
</style>
</head>
<body>
<div class="login-box">
  <h1>Login</h1>
  <p class="sub">Eze Supermarket Portal</p>
  <form id="loginForm">
    <label>Email</label>
    <input type="email" id="email" placeholder="e.g. obi@mail.com" required>

    <label>Password</label>
    <div class="pass-wrap">
      <input type="password" id="password" placeholder="Enter password" required>
      <span class="toggle" onclick="togglePass()">Show</span>
    </div>

    <button type="submit">Login</button>
  </form>
  <div id="msg" class="msg"></div>
  <div class="small">Don’t have an account? <a href="register.html">Register</a></div>
</div>

<script>
const $ = id => document.getElementById(id);
const msg = $("msg");

// Show/hide password
function togglePass(){
  const pw = $("password");
  pw.type = pw.type === "password" ? "text" : "password";
  document.querySelector(".toggle").textContent = pw.type === "password" ? "Show" : "Hide";
}

// Fixed admin account
const admin = {email:"admin@eze.com", password:"admin123", role:"admin"};

document.getElementById("loginForm").addEventListener("submit", e=>{
  e.preventDefault();
  msg.textContent = ""; msg.className = "msg";

  const email = $("email").value.trim();
  const password = $("password").value.trim();

  // Check admin
  if(email === admin.email && password === admin.password){
    localStorage.setItem("activeUser", JSON.stringify(admin));
    msg.textContent = "Welcome Admin! Redirecting..."; msg.classList.add("ok");
    setTimeout(()=> location.href="admin-dashboard.html", 800);
    return;
  }

  // Check users
  let users = JSON.parse(localStorage.getItem("users")||"[]");
  const user = users.find(u => u.email === email && u.password === password);

  if(!user){
    msg.textContent = "Invalid login credentials."; msg.classList.add("err"); 
    return;
  }

  localStorage.setItem("activeUser", JSON.stringify(user));
  msg.textContent = "Login successful! Redirecting..."; msg.classList.add("ok");
  setTimeout(()=> location.href="dashboard.html", 800);
});
</script>
</body>
</html>