<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard â€“ Eze Supermarket</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
*{box-sizing:border-box;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;margin:0;padding:0;}
:root{--blue:#007bff;--bg:#f5f7fb;--card:#fff;--text:#333;}
body{min-height:100vh;background:var(--bg);color:var(--text);transition:.3s;}
body.dark{--bg:#111216;--card:#1f2124;--text:#eaeaea;}

header{background:var(--blue);color:#fff;padding:14px;display:flex;justify-content:space-between;align-items:center;}
header h1{font-size:20px;}
header .balance{font-weight:600;}
header .hamburger{font-size:22px;cursor:pointer;background:none;border:none;color:#fff;}

nav{position:fixed;top:0;left:-240px;width:220px;height:100%;background:var(--card);box-shadow:2px 0 6px rgba(0,0,0,.2);padding:20px;transition:.3s;z-index:1000;}
nav.active{left:0;}
nav h2{color:var(--blue);margin-bottom:16px;}
nav ul{list-style:none;}
nav li{margin-bottom:12px;}
nav a{text-decoration:none;color:inherit;padding:8px;display:block;border-radius:6px;}
nav a:hover{background:var(--blue);color:#fff;}

.overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:900;}
.overlay.active{display:block;}

main{margin-left:240px;padding:20px;transition:margin .3s;}
main.mobile{margin-left:0;}

.stats{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:24px;}
.card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.1);flex:1;min-width:180px;text-align:center;}
.card h3{font-size:16px;margin-bottom:6px;color:var(--blue);}
.card p{font-size:18px;font-weight:600;}

body.dark nav{background:#1f2124;color:#eaeaea;}
body.dark .card{background:#2b2b2b;color:#eee;}
body.dark a{color:#eee;}
body.dark a:hover{color:#fff;}

@media(max-width:768px){
    main{margin-left:0;}
}
</style>
</head>
<body>

<div class="overlay" id="overlay"></div>

<nav id="sidebar">
<h2>Admin Menu</h2>
<ul>
<li><a href="admin-dashboard.html">ðŸ“Š Dashboard</a></li>
<li><a href="admin-users.html">ðŸ‘¥ Users</a></li>
<li><a href="admin-topups.html">ðŸ’³ Top-ups</a></li>
<li><a href="admin-purchase.html">ðŸ›’ Purchases</a></li>
<li><a href="admin-products.html">ðŸ“¦ Products</a></li>
<li><a href="login.html" id="logout">ðŸšª Logout</a></li>
</ul>
</nav>

<header>
<button class="hamburger" id="menuBtn">â˜°</button>
<h1>Admin Dashboard</h1>
<div class="balance">Total User Balance: â‚¦<span id="balance">0</span></div>
</header>

<main id="mainContent">
<h2>Stats Overview</h2>
<div class="stats">
<div class="card"><h3>Total Users</h3><p id="totalUsers">0</p></div>
<div class="card"><h3>Total Top-ups</h3><p id="totalTopups">0</p></div>
<div class="card"><h3>Total Purchases</h3><p id="totalPurchases">0</p></div>
<div class="card"><h3>Total Revenue</h3><p id="totalRevenue">â‚¦0</p></div>
</div>
</main>

<script>
// Hamburger toggle
const menuBtn = document.getElementById('menuBtn');
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
const mainContent = document.getElementById('mainContent');

menuBtn.onclick = () => {
    sidebar.classList.add('active');
    overlay.classList.add('active');
};
overlay.onclick = () => {
    sidebar.classList.remove('active');
    overlay.classList.remove('active');
};

// Load data
let users = JSON.parse(localStorage.getItem('users')||'[]').filter(u=>u.email!=='admin@eze.com');
let topups = JSON.parse(localStorage.getItem('transactions')||'[]');
let purchases = JSON.parse(localStorage.getItem('history')||'[]');

// Stats calculations
document.getElementById('totalUsers').textContent = users.length;
document.getElementById('totalTopups').textContent = topups.length;
document.getElementById('totalPurchases').textContent = purchases.length;

// Total remaining balance
let totalBalance = users.reduce((sum,u)=>sum+Number(u.balance||0),0);
document.getElementById('balance').textContent = totalBalance.toLocaleString();

// Total revenue = sum of top-ups
let revenue = topups.reduce((sum,t)=>sum+Number(t.amount||0),0);
document.getElementById('totalRevenue').textContent = 'â‚¦'+revenue.toLocaleString();

// Logout
document.getElementById('logout').onclick = ()=>{
    localStorage.removeItem('activeUser');
    location.href='login.html';
};

// Dark theme sync
const darkTheme = localStorage.getItem('theme');
if(darkTheme==='dark'){ document.body.classList.add('dark'); }
window.addEventListener('storage', e=>{
    if(e.key==='theme'){ document.body.classList.toggle('dark', localStorage.getItem('theme')==='dark'); }
});
</script>

</body>
</html>