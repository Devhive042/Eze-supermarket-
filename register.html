<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Register â€“ Eze Supermarket</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    *{box-sizing:border-box;font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;}
    body{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px;background:linear-gradient(135deg,#007bff,#00c6ff);}
    .box{width:100%;max-width:460px;background:#fff;border-radius:16px;padding:24px 20px;box-shadow:0 10px 30px rgba(0,0,0,.15);animation:fade .5s ease}
    @keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    h1{margin:0 0 8px;color:#007bff;font-size:22px;text-align:center}
    p.sub{margin:0 0 16px;text-align:center;color:#555}
    label{font-weight:600;color:#333;margin-top:10px;display:block}
    input{width:100%;padding:12px;border:1px solid #ccc;border-radius:10px;margin-top:6px;outline:none;transition:.2s}
    input:focus{border-color:#007bff;box-shadow:0 0 0 4px rgba(0,123,255,.12)}
    .pass-wrap{position:relative}
    .toggle{position:absolute;right:10px;top:50%;transform:translateY(-50%);font-size:12px;color:#007bff;cursor:pointer;user-select:none}
    button{width:100%;padding:12px;border:none;border-radius:10px;background:#007bff;color:#fff;font-weight:700;margin-top:16px;cursor:pointer}
    button:hover{background:#005ecb}
    .msg{margin-top:10px;text-align:center;font-weight:600}
    .err{color:#d60000}.ok{color:#188038}
    .small{margin-top:10px;text-align:center}
    .small a{color:#007bff;text-decoration:none}
  </style>
</head>
<body>
  <div class="box">
    <h1>User Registration</h1>
    <p class="sub">Eze Supermarket Portal</p>

    <form id="form">
      <label>Full Name</label>
      <input id="name" placeholder="e.g. Chinedu Obi" required />

      <label>Email</label>
      <input id="email" type="email" placeholder="e.g. obi@mail.com" required />

      <label>Phone</label>
      <input id="phone" type="tel" placeholder="+2348012345678" pattern="\+234[0-9]{10}" required />

      <label>Password</label>
      <div class="pass-wrap">
        <input id="password" type="password" placeholder="Min 8 characters + special" required />
        <span class="toggle" onclick="togglePass('password',this)">Show</span>
      </div>

      <label>Confirm Password</label>
      <div class="pass-wrap">
        <input id="confirm" type="password" placeholder="Re-enter password" required />
        <span class="toggle" onclick="togglePass('confirm',this)">Show</span>
      </div>

      <button type="submit">Create Account</button>
    </form>

    <div id="msg" class="msg"></div>
    <div class="small">Already have an account? <a href="login.html">Login</a></div>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    const msg = $("msg");

    // Show/Hide password
    function togglePass(id, el){
      const f = $(id);
      f.type = f.type === "password" ? "text" : "password";
      el.textContent = f.type === "password" ? "Show" : "Hide";
    }

    $("form").addEventListener("submit", (e) => {
      e.preventDefault();
      msg.textContent = ""; msg.className = "msg";

      const name = $("name").value.trim();
      const email = $("email").value.trim();
      const phone = $("phone").value.trim();
      const password = $("password").value.trim();
      const confirm = $("confirm").value.trim();

      // Password validation
      if (password.length < 8 || !/[!@#$%^&*(),.?":{}|<>]/.test(password)){
        msg.textContent = "Password must be at least 8 characters with a special character.";
        msg.classList.add("err"); return;
      }
      if (password !== confirm){
        msg.textContent = "Passwords do not match."; msg.classList.add("err"); return;
      }

      let users = JSON.parse(localStorage.getItem("users") || "[]");

      // Prevent duplicate Email
      if (users.some(u => u.email === email)){
        msg.textContent = "Email already registered."; msg.classList.add("err"); return;
      }

      const user = { name, email, phone, password };

      users.push(user);
      localStorage.setItem("users", JSON.stringify(users));

      msg.textContent = "Registered successfully!";
      msg.classList.add("ok");

      // Auto login after register
      localStorage.setItem("activeUser", JSON.stringify(user));

      // Redirect
      setTimeout(() => location.href = "login.html", 800);
    });
  </script>
</body>
</html>